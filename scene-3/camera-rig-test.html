<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://rawgit.com/feiss/aframe-environment-component/master/dist/aframe-environment-component.min.js"></script>
    <script src="https://rawgit.com/protyze/aframe-curve-component/master/dist/aframe-curve-component.min.js"></script>
    <script src="https://rawgit.com/protyze/aframe-alongpath-component/master/dist/aframe-alongpath-component.min.js"></script>
    <script src="https://unpkg.com/aframe-text-geometry-component@^0.5.0/dist/aframe-text-geometry-component.min.js"></script> 
    <script src="script.js" defer></script>
    <script>
        function clickHandler() {
            var camera = document.querySelector("#camera-rig");
            AFRAME.utils.entity.setComponentProperty(camera, "alongpath.curve", "#track1");

            // camera.addEventListener("click", function(){
            //     AFRAME.utils.entity.setComponentProperty(this, "alongpath.curve", "#track1");
            // });
        }
    </script>
</head>
<body>
    <a-scene vr-mode-ui="enabled: true">
        <a-assets>
            <a-asset-item id="optimerBoldFont" src="https://rawgit.com/mrdoob/three.js/dev/examples/fonts/optimer_bold.typeface.json"></a-asset-item>
        </a-assets>
        <!-- Environment -->
        <a-entity id="enviro" position="0 -.001 0" environment="
            preset: tron; 
            groundYScale: 100; 
            fog: 0.4; 
            dressingAmount: 50; 
            groundColor2: #008eb7; 
            groundColor: #b34093; 
            groundTexture: checkerboard;
            ground: hills;
            active: true; seed: 17; 
            skyType: gradient; 
            skyColor: #87faf4; 
            horizonColor: #b50200;
            flatShading: true; 
            dressing: apparatus;
            dressingColor: #3cf7ed; 
            dressingScale: 0.2; 
            dressingAmount: 200;
            dressingOnPlayArea: 1; 
            gridColor: #239893">
        </a-entity>

        <!-- Track -->
        <a-curve id="track1">
            <a-curve-point position="-2 2 -3"></a-curve-point>
            <a-curve-point position="0 1 -3"></a-curve-point>
            <a-curve-point position="2 2 -3"></a-curve-point>
          </a-curve>
          
        <a-draw-curve curveref="#track1" material="shader: line; color: blue;"></a-draw-curve>
        <a-box id="box" position="0 0 -1"></a-box>
        <!-- <a-entity clone-along-curve="curve: #track1; spacing: 0.2; scale: 1 1 1; rotation: 0 0 0;" geometry="primitive:box; height:0.1; width:0.2; depth:0.1"></a-entity> -->


        <!-- Camera -->
        <a-entity id="camera-rig" position="0 1.6 0" look-controls>
            <a-entity id="camera" camera look-controls>
                <!-- Play 'Button' -->
                <a-entity id="play-button" position="-1.15 0 -1" scale="0.6 0.6 0.6"
                    text-geometry=
                        "font: #optimerBoldFont;
                        height: 0.1; 
                        bevelEnabled: true; 
                        bevelSize: 0.02; 
                        bevelThickness: 0.02; 
                        value: Click to Play" 
                    material=
                        "color: #AAAAFF;"
                    updater="">
                    <!-- TODO: add animation -->
             </a-entity>
            
                <!-- <a-box color="yellow" rotation="0 0 0" scale="1 .5 .5" position="0 0 -1">
                    <a-entity text-geometry="value: Click to Play; font: #optimerBoldFont"></a-entity>
                </a-box> -->
            </a-entity>
        </a-entity>

        <!-- CAMERA RIG FOR TELEPORT-CONTROLS AND SUPER-HANDS -->
        <!-- <a-entity id="cameraRig" alongpath="curve: #track1; loop: true; dur: 120000">
            <a-entity id="head" progressive-controls="gazeMixin: mycursor; touchMixin: mytouch; override: true; objects: .obj, .button; maxLevel: point;">
                <a-entity teleport-controls="cameraRig: #cameraRig; teleportOrigin: #head;" shadow="cast:true" haptics="events: triggerdown; dur: 50; force: 0.5" class="left-controller"></a-entity>
                <a-entity teleport-controls="cameraRig: #cameraRig; teleportOrigin: #head;" shadow="cast:true" haptics="events: triggerdown; dur: 50; force: 0.5" class="right-controller"></a-entity>
            </a-entity>
        </a-entity> -->

    </a-scene>
</body>
</html>